<!doctype html>
<html>
<head>
<meta charset='utf-8'><meta name='viewport' content='width=device-width,initial-scale=1'>
<title>Workflow Task</title>
<link href='https://fonts.googleapis.com/css?family=Raleway:100,300,400,700' rel='stylesheet'>
<link rel='stylesheet' href='../css/animate.css'>
<link rel='stylesheet' href='../css/icomoon.css'>
<link rel='stylesheet' href='../css/themify-icons.css'>
<link rel='stylesheet' href='../css/bootstrap.css'>
<link rel='stylesheet' href='../css/magnific-popup.css'>
<link rel='stylesheet' href='../css/owl.carousel.min.css'>
<link rel='stylesheet' href='../css/owl.theme.default.min.css'>
<link rel='stylesheet' href='../css/style.css'>
<script src='../js/modernizr-2.6.2.min.js'></script>
<script src='../js/allowlist.js'></script>
<style>
body{font-family:'Raleway',Arial,sans-serif;margin:0;background:#f7f9fc;color:#333}
.wrap{max-width:1000px;margin:32px auto;padding:0 16px}
.back-link{display:inline-block;margin-bottom:18px;color:#0077be;font-weight:600}
.page-title{margin:0 0 10px}
#summary{font-size:18px;color:#666;margin-bottom:22px}
.card{background:#fff;border:1px solid #e0e6ed;border-radius:12px;padding:20px;margin:16px 0;box-shadow:0 2px 10px rgba(0,0,0,.05)}
.card h3{margin-top:0;color:#333}
.card p{color:#555}
a{color:#0077be}
a:hover{color:#008793}
</style>
</head><body>
<div class='gtco-loader'></div>
<div id='page'>
<div w3-include-html='../navbar.html'></div>
<main class='wrap'>
<a class='back-link' href='../nextgen.html'>← Back to subprocess map</a>
<h1 class='page-title' id='title'>Task</h1><p id='summary'></p>
<div id='steps'></div>
</main>
<div w3-include-html='../footer.html'></div>
</div>
<div class='gototop js-top'>
  <a href='#' class='js-gotop'><i class='icon-arrow-up'></i></a>
</div>
<script>
const id=new URLSearchParams(location.search).get('id');
fetch('../data/workflow.json')
  .then(r=>r.json())
  .then(d=>{
    const workflows = (d.workflows && d.workflows.length)
      ? d.workflows
      : [{ id:'default', subprocesses: d.subprocesses || [] }];
    const all = workflows.reduce((acc,w)=>acc.concat(w.subprocesses||[]),[]);
    const sp = all.find(x=>x.id===id);
    if(!sp){document.getElementById('title').textContent='Subprocess not found';return;}
    document.getElementById('title').textContent=sp.title;
    document.getElementById('summary').textContent=sp.summary || '';
    const root=document.getElementById('steps');
    root.innerHTML='';

    if (sp.id === 'setup-database-derivation') {
      const overview=document.createElement('div');
      overview.className='card';
      overview.innerHTML = `
        <h3>Workflow Setup Visual Overview</h3>
        <img src='../assets/workflow-setup-overview.jpg' alt='Workflow setup overview' style='max-width:100%;height:auto;border-radius:8px;border:1px solid #e0e6ed'>
      `;
      root.appendChild(overview);
    }

    if (sp.id === 'smcubes-core-creation') {
      const overview=document.createElement('div');
      overview.className='card';
      overview.innerHTML = `
        <h3>SMCubes Metadata Core Creation Visual Overview</h3>
        <img src='../assets/smcubes-core-creation-overview.jpg' alt='SMCubes Metadata Core Creation overview' style='max-width:100%;height:auto;border-radius:8px;border:1px solid #e0e6ed'>
      `;
      root.appendChild(overview);
    }

    if (sp.id === 'transformation-metadata') {
      const overview=document.createElement('div');
      overview.className='card';
      overview.innerHTML = `
        <h3>SMCubes Transformation Rules Creation Visual Overview</h3>
        <img src='../assets/smcubes-transformation-rules-overview.jpg' alt='SMCubes Transformation Rules Creation overview' style='max-width:100%;height:auto;border-radius:8px;border:1px solid #e0e6ed'>
      `;
      root.appendChild(overview);
    }

    if (sp.id === 'python-rule-generation') {
      const overview=document.createElement('div');
      overview.className='card';
      overview.innerHTML = `
        <h3>Task 3: Generate Executable Transformation Code — Visual Overview</h3>
        <img src='../assets/task3-executable-transformation-overview.jpg' alt='Task 3 Generate Executable Transformation Code overview' style='max-width:100%;height:auto;border-radius:8px;border:1px solid #e0e6ed'>
      `;
      root.appendChild(overview);
    }

    if (sp.id === 'full-execution-test-suite') {
      const overview=document.createElement('div');
      overview.className='card';
      overview.innerHTML = `
        <h3>Task 4: Full Execution with Test Suite — Visual Overview</h3>
        <img src='../assets/task4-full-execution-test-suite-overview.jpg' alt='Task 4 Full Execution with Test Suite overview' style='max-width:100%;height:auto;border-radius:8px;border:1px solid #e0e6ed'>
      `;
      root.appendChild(overview);
    }

    if (sp.id === 'review-merge-governance') {
      const overview=document.createElement('div');
      overview.className='card';
      overview.innerHTML = `
        <h3>Task 5: Review, Approve, Merge — Visual Overview</h3>
        <img src='../assets/task5-review-approve-merge-overview.jpg' alt='Task 5 Review Approve Merge overview' style='max-width:100%;height:auto;border-radius:8px;border:1px solid #e0e6ed'>
      `;
      root.appendChild(overview);
    }
    (sp.steps||[]).forEach(st=>{
      const div=document.createElement('div');div.className='card';div.id='step-'+st.id;
      div.innerHTML=`<h3>${st.title}</h3>
      <p><b>Purpose:</b> ${st.purpose || ''}</p>
      <p><b>Inputs:</b> ${(st.inputs||[]).join(', ')}</p>
      <p><b>Outputs:</b> ${(st.outputs||[]).join(', ')}</p>
      <p><a href='${st.wikiUrl || '#'}'>Wiki detail</a> · <a href='${st.discussionUrl || '#'}'>Discussion</a> · <a href='https://github.com/eclipse-efbt/efbt/tree/master'>Reference implementation code</a> · <a href='https://eclipse.dev/efbt/documentation.html'>Reference implementation tools</a></p>
      <p><small>Anchor: <code>#step-${st.id}</code></small></p>`;
      root.appendChild(div);
    })
  })
  .catch(err=>{
    document.getElementById('title').textContent='Unable to load subprocess';
    document.getElementById('summary').textContent=String(err);
  });
</script>
<script src='../js/jquery.min.js'></script>
<script src='../js/jquery.easing.1.3.js'></script>
<script src='../js/bootstrap.min.js'></script>
<script src='../js/jquery.waypoints.min.js'></script>
<script src='../js/owl.carousel.min.js'></script>
<script src='../js/jquery.magnific-popup.min.js'></script>
<script src='../js/magnific-popup-options.js'></script>
<script src='../js/main.js'></script>
<script src='../js/w3-include.js'></script>
</body></html>
